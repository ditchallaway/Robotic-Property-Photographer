services:
  moonshot:
    build: .
    ports:
      - "3000:3000"
    volumes:
      # 1. Sync your code (The "Bind Mount")
      - .:/app

      # 2. PROTECT THE GENERATED ASSETS (The "Anonymous Volumes")
      # These lines tell Docker: "Keep using the internal version of these folders
      # that we created during the 'Build' step, don't use my computer's version."
      - /app/node_modules
      - /app/.next
      - /app/public/cesium

      # 3. Persistent data
      - ./public/snapshots:/app/public/snapshots
    environment:
      - WATCHPACK_POLLING=true
      - NODE_ENV=development
